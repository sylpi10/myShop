{% extends "shop/base.html" %}

{% load static %}

{% block title %}
 shopping cart
{% endblock %}

{% block content %}
 <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <main class="">
    <div class="main-wrapper">
    <div class="detail-wrapper">

         <h1>Mon Panier</h1>
        <table class="">
            <thead>
            <tr>
                <th> </th>
                <th>Produit</th>
                <th>Quantité</th>
                <th>Retirer</th>
                <th>Prix Unitaire</th>
                <th> Prix </th>
            </tr>
            </thead>
            <tbody>
            {% for item in cart %}
                {% with product=item.product %}
            <tr>
                <th>
                    <a href="{{ product.get_absolute_url }}">
                        <img src="{% if product.image %}{{ product.smart.url }}
                        {% else %}{% static 'img/no_image.png' %}{% endif %}" width="360" alt="Product image"
                             title="Retourner sur le détail du produit">
                    </a>
                </th>

                <td data-label="Produit">{{ product.name }}</td>
                 <td data-label="Quantité">
<!--                    <form action="{% url 'cart:cart_add' product.quantity %}" method="post">-->
<!--&lt;!&ndash;                        {{ item.update_quantity_form.quantity }}&ndash;&gt;-->

<!--                          <select name="quantity" id="id_quantity">-->
<!--                             {% for i in quantity %}-->
<!--                               <option value="{{i}}"> {{i}} </option>-->
<!--                            {% endfor %}-->
<!--                        </select>-->

<!--&lt;!&ndash;  <input type="hidden" name="update" value="False" id="id_update">&ndash;&gt;-->
<!--                        {{ item.update_quantity_form.update }}-->
<!--                        <input type="submit" value="Changer">-->
<!--                        {% csrf_token %}-->
<!--                    </form>-->
                    <span class="quantity"> <strong> {{ item.quantity }} </strong> </span>

                </td>
                <td data-label="Retirer">
                    <a href="{% url 'cart:cart_remove' product.id %}"> <i class="fa fa-times" aria-hidden="true"></i>
                    Retirer du Panier</a>
                </td>
                <td class="num" data-label="Prix Unitaire" >{{ item.price }} €</td>
                <td class="num" data-label="Prix">{{ item.total_price }} €</td>
            </tr>
            {% endwith %}
            {% endfor %}

            </tbody>
            <tfoot>
              <tr class="total">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td colspan="2" class="num">Total: {{ cart.get_total_price}} €</td>
            </tr>
            </tfoot>
        </table>
        <p class="text-right">
            <a href="{% url 'shop:product_list' %}" class="button light">
                <i class="fa fa-shopping-basket" aria-hidden="true"></i> Continuer mes Achats </a>
              {% if cart|length > 0 %}
            <a href="{% url 'orders:order_create' %}">
                  <i class="fa fa-check" aria-hidden="true"></i> Valider mon panier  </a>
                 {% else %}
                <a href="#" class="empty-cart">
                    <i class="fa fa-times" aria-hidden="true"></i> Panier vide  </a>
                 {% endif %}

        </p>
    </div>
    </div>
</main>
{% endblock %}